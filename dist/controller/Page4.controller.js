sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","./utilities","sap/ui/core/routing/History"],function(e,t,n,i){"use strict";return e.extend("com.sap.build.standard.untitledPrototype.controller.Page4",{handleRouteMatched:function(e){var t="App60a5ae41f6baa2192b2067f0";var n={};if(e.mParameters.data.context){this.sContext=e.mParameters.data.context}else{if(this.getOwnerComponent().getComponentData()){var i=function(e){if(Object.keys(e).length!==0){for(var t in e){if(t!=="sourcePrototype"&&t.includes("Set")){return t+"("+e[t][0]+")"}}}};this.sContext=i(this.getOwnerComponent().getComponentData().startupParameters)}}if(!this.sContext){this.sContext="estudiantesSet('23')"}var s;if(this.sContext){s={path:"/"+this.sContext,parameters:n};this.getView().bindObject(s)}},_onButtonPress:function(e){e=jQuery.extend(true,{},e);return new Promise(function(e){e(true)}).then(function(e){var t=this.getView(),n=this,i=true,s=[];if(s.length){i=this.handleChangeValuestate(s,t)}if(i){return new Promise(function(e,i){var s=n.oModel;var o=function(e){s.resetChanges();i(new Error(e))};if(s&&s.hasPendingChanges()){s.submitChanges({success:function(i){var r=i.__batchResponses[0];var a=r.__changeResponses&&r.__changeResponses[0];if(a&&a.data){var u=s.getKey(a.data);t.unbindObject();t.bindObject({path:"/"+u});if(window.history&&window.history.replaceState){window.history.replaceState(undefined,undefined,window.location.hash.replace(encodeURIComponent(n.sContext),encodeURIComponent(u)))}s.refresh();e()}else if(a&&a.response){o(a.message)}else if(!a&&r.response){o(r.message)}else{s.refresh();e()}},error:function(e){i(new Error(e.message))}})}else{e()}})}}.bind(this)).then(function(t){if(t===false){return false}else{var n=e.getSource().getBindingContext();return new Promise(function(e){this.doNavigate("Page5",n,e,"")}.bind(this))}}.bind(this)).catch(function(e){if(e!==undefined){t.error(e.message)}})},handleChangeValuestate:function(e,t){var n=true;if(e){e.forEach(function(e){var i=t.byId(e.id);if(i){i.setValueState("None");if(i.getValue()===""){i.setValueState("Error");n=false}else if(i.getDateValue&&!i._bValid){i.setValueState("Error");n=false}}})}return n},doNavigate:function(e,t,n,i){var s=t?t.getPath():null;var o=t?t.getModel():null;var r;if(s!==null&&s!==""){if(s.substring(0,1)==="/"){s=s.substring(1)}r=s.split("(")[0]}var a;var u=this.sMasterContext?this.sMasterContext:s;if(r!==null){a=i||this.getOwnerComponent().getNavigationPropertyForNavigationWithContext(r,e)}if(a!==null&&a!==undefined){if(a===""){this.oRouter.navTo(e,{context:s,masterContext:u},false)}else{o.createBindingContext(a,t,null,function(t){if(t){s=t.getPath();if(s.substring(0,1)==="/"){s=s.substring(1)}}else{s="undefined"}if(s==="undefined"){this.oRouter.navTo(e)}else{this.oRouter.navTo(e,{context:s,masterContext:u},false)}}.bind(this))}}else{this.oRouter.navTo(e)}if(typeof n==="function"){n()}},_onButtonPress1:function(e){e=jQuery.extend(true,{},e);return new Promise(function(e){e(true)}).then(function(t){var n=e.getSource().getBindingContext();return new Promise(function(e){this.doNavigate("Page5",n,e,"")}.bind(this))}.bind(this)).then(function(e){if(e===false){return false}else{return new Promise(function(e){var t,n;var i=this.oModel;if(i&&i.hasPendingChanges()){t=Object.keys(i.mChangedEntities);for(var s=0;s<t.length;s++){n=i.getContext("/"+t[s]);if(n&&n.bCreated){i.deleteCreatedEntry(n)}}i.resetChanges()}e()}.bind(this))}}.bind(this)).catch(function(e){if(e!==undefined){t.error(e.message)}})},onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getTarget("Page4").attachDisplay(jQuery.proxy(this.handleRouteMatched,this));this.oModel=this.getOwnerComponent().getModel()}})},true);